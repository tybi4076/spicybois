---
title: "Lab10"
author: "Spicy Bois"
date: "10/28/2019"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(tidyverse)
questions <- read_csv("Questions_trunc.csv")
answers <- read_csv("Answers_trunc.csv")
colnames(answers)
colnames(questions)
str(answers)
str(questions)
```

# Lab 10


##Individual Sections

### Does code being included in questions/answers effect the user score? (Trent)
```{r}
library(tidyverse)
q_code <- questions %>%
  mutate(code = str_detect(Body, "<code>")) %>%
  mutate(rank = case_when((Score>=50)~"high", ((Score<50)~"low"))) %>%
  mutate(rank.num = ifelse(Score>=50, 1, 0))

q_code_means <- q_code %>%
  group_by(code) %>% summarise(mean(rank.num))

q_code <- q_code %>% mutate(rank.fact = as.factor(rank.num))
levels(q_code$rank.fact) <- c('Low', 'High')

q_code_means

ggplot(data = q_code) +
  geom_bar(mapping = aes(rank, fill = rank)) +
  facet_wrap(~ code) +
  facet_wrap(~ code) +
  labs(title = "How a score of a question if effected by whether or not code is included", x = "Score", y = "Count", fill="Score", caption = "high represents questions with scores over 50 votes, and low represents questions with less than 50 votes. TRUE reprenents questions that had code attatched to them, and FALSE questions do not") 

#answers code

a_code <- answers %>%
  mutate(code = str_detect(Body, "<code>")) %>%
  mutate(rank = case_when((Score>=50)~"high", ((Score<50)~"low"))) %>%
  mutate(rank.num = ifelse(Score>=50, 1, 0))

a_code_means <- a_code %>%
  group_by(code) %>% summarise(mean(rank.num))

a_code <- a_code %>% mutate(rank.fact = as.factor(rank.num))
levels(q_code$rank.fact) <- c('Low', 'High')

a_code_means

ggplot(data = a_code) +
  geom_bar(mapping = aes(rank, fill = rank)) +
  facet_wrap(~ code) +
  labs(title = "How a score of a answer if effected by whether or not code is included", x = "Score", y = "Count", fill="Score", caption = "high represents answers with scores over 50 votes, and low represents answers with less than 50 votes. TRUE reprenents answers that had code attatched to them, and FALSE answers do not")
```
Clearly, while there are still several low scoring questions and answers that included code, it does make a difference in whether or not a question/answer has a high score if code is included. For example, roughly 6% of answers that had over 50 upvotes included code, whereas only 0.8% had over 50 upvotes that did not have code included. So while the effect is not hugely substantial, it can still make a difference in question/answer score to include code. 
